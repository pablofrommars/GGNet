@inherits Tooltip

@if (visibility)
{
    <defs>
        <style type="text/css">

            #@(Id) [role^="tooltip"] {
                --tooltip-color: @color;
                --tooltip-alpha: @alpha;
                --tooltip-theme-color: @themeColor;
                --tooltip-theme-alpha: @themeAlpha;

                --tooltip-fadein-duration: 500ms;

                position: fixed;
                overflow: visible;
            }

                #@(Id) [role^="tooltip"] + div {
                    position: relative;
                    pointer-events: none;
                }

                #@(Id) [role^="tooltip"] .arrow {
                    position: absolute;
                }

                    #@(Id) [role^="tooltip"] .arrow::before {
                        position: absolute;
                        content: '';
                        border: 5px solid transparent;
                        pointer-events: none;
                    }

                #@(Id) [role^="tooltip"] .bubble {
                    position: absolute;
                    border-radius: @(Theme.Tooltip.Radius);
                    padding: @(Theme.Tooltip.Margin.Top)@(Theme.Tooltip.Margin.Units) @(Theme.Tooltip.Margin.Right)@(Theme.Tooltip.Margin.Units) @(Theme.Tooltip.Margin.Bottom)@(Theme.Tooltip.Margin.Units) @(Theme.Tooltip.Margin.Left)@(Theme.Tooltip.Margin.Units);
                    background: var(--tooltip-theme-color);
                    white-space: nowrap;
                    pointer-events: none;

                    color: @(Theme.Tooltip.Text.Color);
                    font-size: @(Theme.Tooltip.Text.Size);
                }

            @@keyframes fadein {
                from {
                    opacity: 0;
                }

                to {
                    opacity: var(--tooltip-theme-opacity);
                }
            }

            #@(Id) [role^="tooltip"] .arrow::before,
            #@(Id) [role^="tooltip"] .bubble {
                animation: fadein var(--tooltip-fadein-duration) linear forwards;
            }

            #@(Id) [role^="tooltip-top"] .arrow::before {
                border-bottom-width: 0;
                border-top-color: var(--tooltip-theme-color);
                bottom: 100%;
                transform: translate(-50%, -.5em);
            }

            #@(Id) [role^="tooltip-top"] .bubble {
                bottom: calc(100% + 5px);
            }

            #@(Id) [role^="tooltip-top"][role$="start"] .bubble {
                transform: translate(-75%, -0.48em);
            }

            #@(Id) [role^="tooltip-top"][role$="center"] .bubble {
                transform: translate(-50%, -0.48em);
            }

            #@(Id) [role^="tooltip-top"][role$="end"] .bubble {
                transform: translate(-25%, -0.48em);
            }

            #@(Id) [role^="tooltip-bottom"] .arrow::before {
                border-top-width: 0;
                border-bottom-color: var(--tooltip-theme-color);
                top: 100%;
                transform: translate(-50%, .5em);
            }

            #@(Id) [role^="tooltip-bottom"] .bubble {
                top: calc(100% + 5px);
            }

            #@(Id) [role^="tooltip-bottom"][role$="start"] .bubble {
                transform: translate(-75%, 0.48em);
            }

            #@(Id) [role^="tooltip-bottom"][role$="center"] .bubble {
                transform: translate(-50%, 0.48em);
            }

            #@(Id) [role^="tooltip-bottom"][role$="end"] .bubble {
                transform: translate(-25%, 0.48em);
            }

            #@(Id) [role^="tooltip-left"] .arrow::before {
                border-right-width: 0;
                border-left-color: var(--tooltip-theme-color);
                top: 50%;
                left: calc(0em - 5px);
                transform: translate(-.5em, -50%);
            }

            #@(Id) [role^="tooltip-left"] .bubble {
                top: 50%;
                right: calc(100% + 5px);
            }

            #@(Id) [role^="tooltip-left"][role$="start"] .bubble {
                transform: translate(-0.48em, -75%);
            }

            #@(Id) [role^="tooltip-left"][role$="center"] .bubble {
                transform: translate(-0.48em, -50%);
            }

            #@(Id) [role^="tooltip-left"][role$="end"] .bubble {
                transform: translate(-0.48em, -25%);
            }

            #@(Id) [role^="tooltip-right"] .arrow::before {
                border-left-width: 0;
                border-right-color: var(--tooltip-theme-color);
                top: 50%;
                right: calc(0em - 5px);
                transform: translate(.5em, -50%);
            }

            #@(Id) [role^="tooltip-right"] .bubble {
                top: 50%;
                left: calc(100% + 5px);
            }

            #@(Id) [role^="tooltip-right"][role$="start"] .bubble {
                transform: translate(0.48em, -75%);
            }

            #@(Id) [role^="tooltip-right"][role$="center"] .bubble {
                transform: translate(0.48em, -50%);
            }

            #@(Id) [role^="tooltip-right"][role$="end"] .bubble {
                transform: translate(0.48em, -25%);
            }
        </style>
    </defs>

    @((MarkupString)foreignObject!)
}